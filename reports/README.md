# Test Reports and Evidence

This folder contains all testing reports and evidence for the Online Bookstore Final Assessment.

## Contents

### Coverage Report
- **`coverage-report/`** - Interactive HTML coverage report
  - Open `coverage-report/index.html` in a browser to view
  - Generated by: `pytest --cov=. --cov-report=html`
  - Shows: 80% overall coverage (app.py: 79%, models.py: 95%)
  - Click on individual files to see line-by-line coverage

### Locust Load Testing Reports
- **`locust-report.html`** - Full interactive Locust report
  - Complete test results with 23,314 requests
  - 0% failure rate, 4.09ms average response time
  - 236.5 RPS peak throughput with 50 concurrent users

- **`locust-statistics.pdf`** - Statistics tab screenshot
  - Summary of requests, failures, response times
  - Key performance metrics per endpoint

- **`locust-charts.pdf`** - Charts tab screenshot
  - Visual performance trends over time
  - RPS and response time graphs

### Security Testing (Bandit)
- **`bandit-security-scan.txt`** - Complete Bandit scan results
  - 12 issues found (1 HIGH, 11 LOW)
  - Scanned using Python 3.12 in separate venv (`venv-bandit`)
  - Total lines scanned: 556

## Test Results Summary

### Functional Testing (pytest)
- **Total Tests**: 86/86 passing (100%)
- **Test Duration**: 4.09s
- **Code Coverage**: 80% overall

### Performance Testing (Locust)
- **Concurrent Users**: 50
- **Total Requests**: 23,314
- **Failure Rate**: 0%
- **Average Response Time**: 4.09ms
- **Peak RPS**: 236.5 requests/second
- **Test Duration**: ~2 minutes

### Security Testing (Bandit)
- **Total Issues**: 12
- **High Severity**: 1
- **Low Severity**: 11
- **Scan Tool**: Bandit 1.8.6
- **Python Version**: 3.12.0 (venv-bandit)

## Security Findings Details

### HIGH Severity (1 issue)

**[B201] Flask debug=True (app.py:343)**
- **Issue**: Flask app runs with `debug=True`, exposing Werkzeug debugger
- **Risk**: Allows execution of arbitrary code in development mode
- **Justification**: Acceptable for educational/demonstration application
- **Production Fix**: Set `debug=False` or use environment variable

### LOW Severity (11 issues)

**[B105] Hardcoded password/secret key (2 issues)**
1. **app.py:6** - Hardcoded secret key `'your_secret_key'`
   - Acceptable for demo; use environment variables in production
2. **locustfile.py:52** - Test password `'TestPass123!'`
   - Acceptable for load testing scenarios

**[B311] Weak random number generation (8 issues)**
- **locustfile.py**: Multiple uses of `random.randint()` and `random.choice()` for:
  - User ID generation (line 50)
  - Book selection (lines 84, 111, 128)
  - Quantity selection (lines 85, 112)
  - Discount code selection (line 135)
- **models.py:143**: Transaction ID generation
- **Risk**: Not cryptographically secure
- **Justification**: Acceptable for testing and non-security-critical IDs
- **Production Fix**: Use `secrets` module for sensitive operations

**[B404] Subprocess import (1 issue)**
- **locustfile.py:209** - Import of subprocess module
- **Justification**: Used for helper scripts, not user input
- **Risk**: Low in current implementation

### Production Security Recommendations

For production deployment, the following improvements would be required:

1. **Disable debug mode**: `app.run(debug=False)`
2. **Use environment variables**: For secret keys and configuration
3. **Hash passwords**: Implement bcrypt or similar
4. **Secure session management**: Use secure, httponly cookies
5. **Cryptographically secure RNG**: Replace `random` with `secrets` module for sensitive operations
6. **Input sanitization**: Additional validation layers
7. **HTTPS enforcement**: Force SSL/TLS in production

## How to Regenerate

### Coverage Report
```bash
pytest tests/ --cov=. --cov-report=html
open reports/coverage-report/index.html
```

### Locust Report
```bash
# Terminal 1: Start Flask app
python app.py

# Terminal 2: Start Locust
locust -f locustfile.py
# Open http://localhost:8089
# Configure: 50 users, 5 spawn rate, http://localhost:5000
# Run for 2-3 minutes, then download report
```

### Bandit Security Scan
```bash
# Use Python 3.12 venv for Bandit compatibility
source venv-bandit/bin/activate
bandit -r . -ll --exclude ./venv,./venv-bandit,./tests,./.github
```

---

**Student**: Antony O'Neill (24185521)
**Date**: 12 October 2025
**Module**: CSO7006 - Software Testing
